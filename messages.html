<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <meta name="description" content="The Elegant Frontend Framework">
    <meta name="author" content="Topi Matikainen">
    <script src="https://jspm.io/system@0.4.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <title>
       
      TM - Messages
    </title>
  </head>
  <body>
    <div id="sf-wrap">
      <div ng-controller="LoginCtrl">
        <nav role="navigation" class="navbar navbar-default navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" data-toggle="collapse" data-target=".navbar-ex1-collapse" class="navbar-toggle"><span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand kickstrap-logo">TM</a>
            </div>
            <div class="navbar-collapse collapse navbar-ex1-collapse">
              <!-- Stripped-down header. Help users to focus on their purchase.-->
              <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/newpage.html#disqus_thread">newSite</a></li>
              </ul>
              <form class="navbar-form navbar-right">
                <div class="form-group"><a id="install" href="docs.html#first-steps" class="btn btn-primary">Install </a></div>
              </form>
              <ul class="navbar-right nav navbar-nav">
                <li><a href="/cart.html"> <span class="glyphicon glyphicon-shopping-cart"> </span><span>&nbsp;</span><span class="badge">3</span></a></li>
                <li class="active"><a href="/messages.html"> <span class="glyphicon glyphicon-envelope"> </span><span>&nbsp;</span><span class="badge">10</span></a></li>
                <li><a href="#" data-target="#login" data-toggle="modal"> <span ng-hide="auth.user">Login </span><span ng-show="auth.user" class="ks-afterload"><img ng-src="{{auth.user.thumbnailImg}}" style="width: 20px;height: 20px;"></span></a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div id="login" tabindex="-1" class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" data-dismiss="modal" class="close">&times;</button>
                <h4 class="modal-title">Login</h4>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div ng-show="auth.user" class="col-sm-6">
                    <p><img ng-src="{{auth.user.thumbnailImg}}"></p>
                    <p class="lead">Logged in as {{auth.user.name}}</p>
                    <p><a href="#" ng-click="auth.$logout()" class="btn btn-default">Logout</a></p>
                  </div>
                  <div ng-hide="auth.user" class="col-sm-6">
                    <!-- Thanks http://nicolasgallagher.com/lab/css3-social-signin-buttons/-->
                    <p class="lead">Login using...</p>
                    <p><a href="#" ng-click="auth.$login('facebook')" class="btn-auth btn-facebook">Facebook</a></p>
                    <p><a href="#" ng-click="auth.$login('twitter')" class="btn-auth btn-twitter">Twitter</a></p>
                    <p><a href="#" ng-click="auth.$login('github')" class="btn-auth btn-github">GitHub</a></p>
                    <p>Support Kickstrap Development</p>
                    <p>
                      <script data-gittip-username="yourwebsitesUX" data-gittip-widget="button" src="//gttp.co/v1.js"></script>
                    </p>
                  </div>
                  <div class="col-sm-6">
                    <div class="alert alert-info">
                      <h4>Example</h4>
                      <p>This screen simply demonstrates Firebase's native social login authorization.</p>
                    </div>
                    <p>When using your own Firebase account, don't forget to <a href="/docs.html#social-login">setup your app keys and secrets </a>for each social network</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div ng-controller="MessagesCtrl" class="row">
          <link ng-repeat="contact in contacts | orderByPriority" rel="prerender" ng-href="http://images.weserv.nl/?url=upload.wikimedia.org/wikipedia/commons/{{contact.img}}&amp;h=120&amp;w=120&amp;t=square">
          <div id="newMessage" class="modal fade">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" data-dismiss="modal" aria-hidden="true" class="close close">&times;</button>
                  <h4>New Message</h4>
                </div>
                <div class="modal-body">
                  <form role="form">
                    <div class="form-group"> 
                      <input type="text" placeholder="To:" class="form-control">
                    </div>
                    <div class="form-group"> 
                      <textarea placeholder="Message" rows="10" class="form-control"></textarea>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" data-dismiss="modal" class="btn btn-default">Cancel</button>
                  <button type="button" data-dismiss="modal" class="btn btn-primary">Send Message</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-3">
            <h1>Messages</h1>
            <p class="lead"><a data-toggle="modal" data-target="#newMessage" href="#">New</a></p>
            <article class="panel panel-default">
              <div class="panel-heading"> 
                <input type="text" ng-model="threadInput" placeholder="Search Threads" class="form-control">
              </div>
              <div class="list-group ks-beforeload">
                <p class="list-group-item">Loading...</p>
              </div>
              <div class="list-group ks-afterload"><a sly-repeat="thread in threads | orderByPriority | filter: threadInput" ng-click="setSelectedThread(thread)" href="#message" ng-class="{'active': selectedThread.threadId == thread.threadId }" class="list-group-item"> 
                  <div ng-if="contacts[thread.messages[0].contactId].img" class="media"><img ng-src="http://images.weserv.nl/?url=upload.wikimedia.org/wikipedia/commons/{{contacts[thread.messages[0].contactId].img}}&amp;h=128&amp;w=128&amp;t=square" style="width: 64px;" class="media-object img-rounded pull-left">
                    <div class="media-body">
                      <h4 class="media-heading">{{thread.subject}}</h4>
                      <p style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" class="text-muted">{{thread.messages[0].text}}</p>
                    </div>
                  </div></a></div>
            </article>
          </div>
          <div id="message" style="padding-top: 50px;">
            <nav class="navbar navbar-default visible-sm visible-xs">
              <div class="container">
                <ul class="nav navbar-nav">	
                  <li><a href="#"> <span class="glyphicon glyphicon-chevron-left"> </span> Messages</a></li>
                </ul>
              </div>
            </nav>
          </div>
          <div class="col-sm-12 col-md-9 ks-afterload">
            <p ng-hide="threads.$getIndex().length &gt; 0" class="text-muted"><em>No messages to display</em></p>
            <div ng-hide="selectedThread || threads.$getIndex().length == 0" class="text-muted"><em class="hidden-xs hidden-sm">Please select a thread from the left</em><em class="visible-xs visible-sm">Please select a thread from above</em>
              <div id="ads" class="center-block"></div>
            </div>
            <h1>{{selectedThread.subject}}</h1><br>
            <div ng-repeat="message in selectedThread.messages" class="media"><img ng-src="http://images.weserv.nl/?url=upload.wikimedia.org/wikipedia/commons/{{contacts[message.contactId].img}}&amp;h=64&amp;w=64&amp;t=square" style="width: 32px;" class="img-rounded media-object pull-left">
              <div class="media-body">
                <p class="lead pull-left">{{contacts[message.contactId].fName}} {{contacts[message.contactId].lName}}</p>
                <div class="clearfix"></div>
                <p><em class="text-muted">Sent at {{message.date}}</em></p>
                <p class="readable">{{message.text}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="sf-push"></div>
    </div>
    <section id="sf-footer" class="navbar navbar-inverse navbar-static-top">
      <div class="container">
        <ul class="nav navbar-nav">
          <li>
            <!-- Copyright: Edit this in app.coffee--><a href="#">&copy; Topi Matikainen</a>
          </li>
        </ul>
        <ul class="nav navbar-nav pull-right">
          <li>
            <!-- You're welcome to remove this logo, but we'd appreciate it if you'd link to us.-->
            <!-- The more involvement from the community, the better Kickstrap works for you.--><a href="http://getkickstrap.com">Powered by <span class="kickstrap-logo">Kickstrap</span></a>
          </li>
        </ul>
      </div>
    </section>
    <script src="//cdn.firebase.com/v0/firebase.js"></script>
    <script src="js/kickstrap.js"></script><script type="text/javascript">
(function() {
  k$.ready(function() {
    return $.growl({
      title: "Example page",
      type: "info",
      delay: 2000,
      text: "<br>Use this template to hack your own page."
    });
  });

}).call(this);
</script>
  </body>
</html>